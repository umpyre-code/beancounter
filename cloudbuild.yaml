steps:
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:latest || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull rust:latest || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: ['-c', 'docker build --build-arg SSH_KEY="$$SSH_KEY" --build-arg SCCACHE_KEY="$$SCCACHE_KEY"  -t gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:latest -t gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:$REVISION_ID --cache-from gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:latest --cache-from rust:latest .']
  secretEnv: ['SSH_KEY', 'SCCACHE_KEY']
images: [
   'gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:latest','gcr.io/$PROJECT_ID/github.com/umpyre-code/beancounter:$REVISION_ID',
]
timeout: 1h
secrets:
- kmsKeyName: projects/umpyre/locations/global/keyRings/deploy/cryptoKeys/deploy-key
  secretEnv:
    SSH_KEY: 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
    SCCACHE_KEY: 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
